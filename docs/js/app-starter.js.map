{
  "version": 3,
  "sources": ["../../dist/js/application.js"],
  "sourcesContent": ["var drumSet = document.querySelector(\"#drumSet\");\r\nvar btnPlay = document.querySelector(\"#btnPlay\");\r\nvar btnGenRandom = document.querySelector(\"#btnRandom\");\r\nvar bpmInput = document.querySelector(\"#bpm\");\r\nvar gridRows = document.querySelector(\"#gridRows\");\r\nvar gridColumns = document.querySelector(\"#gridColumns\");\r\nvar columns = gridColumns.value;\r\nvar rows = gridRows.value;\r\nvar playbackMode = false;\r\nvar instrumentsStyle = document.querySelector('[data=\"instrumentsStyle\"]');\r\nvar kickArr = [];\r\nvar instrumentsList = [\"KICK\", \"SNARE\", \"HI-HAT\", \"CRASH\", \"RIDE\", \"COW-BELL\", \"TOM-1\", \"TOM-2\", \"SPLASH\"];\r\nvar audioCtx;\r\nvar primaryTone = null;\r\nvar primaryGain = null;\r\nvar secondaryTone;\r\nvar outputGain = null;\r\nwindow.addEventListener(\"DOMContentLoaded\", ready);\r\nfunction ready() {\r\n\tmakeAudioCtx();\r\n\treadLocalStorage();\r\n\tgenerateRandom();\r\n\tresize();\r\n}\r\nfunction readLocalStorage() {\r\n\tif (localStorage.getItem(\"bpmInput\") == null || localStorage.getItem(\"bpmInput\") == \"false\") {\r\n\t\tlocalStorage.setItem(\"bpmInput\", bpmInput.value);\r\n\t} else {\r\n\t\tbpmInput.value = localStorage.getItem(\"bpmInput\");\r\n\t}\r\n\tif (localStorage.getItem(\"gridRows\") == null || localStorage.getItem(\"gridRows\") == \"false\") {\r\n\t\tlocalStorage.setItem(\"gridRows\", gridRows.value);\r\n\t} else {\r\n\t\tgridRows.value = localStorage.getItem(\"gridRows\");\r\n\t}\r\n\tif (localStorage.getItem(\"gridColumns\") == null || localStorage.getItem(\"gridColumns\") == \"false\") {\r\n\t\tlocalStorage.setItem(\"gridColumns\", gridColumns.value);\r\n\t} else {\r\n\t\tgridColumns.value = localStorage.getItem(\"gridColumns\");\r\n\t}\r\n}\r\nfunction makeAudioCtx() {\r\n\ttry {\r\n\t\tAudioContext = window.AudioContext || window.webkitAudioContext;\r\n\t\tif (audioCtx == undefined) {\r\n\t\t\taudioCtx = audioCtx || new AudioContext();\r\n\t\t\toutputGain = audioCtx.createGain();\r\n\t\t\toutputGain.gain.value = 0.5;\r\n\t\t\toutputGain.connect(audioCtx.destination);\r\n\t\t\tprimaryTone = audioCtx.createOscillator();\r\n\t\t\tprimaryGain = audioCtx.createGain();\r\n\t\t\tprimaryTone.connect(primaryGain);\r\n\t\t\tprimaryTone.type = \"triangle\";\r\n\t\t\tprimaryGain.connect(outputGain);\r\n\t\t}\r\n\t} catch (e) {\r\n\t\t// console.warn('Web Audio API is not supported in this browser');\r\n\t}\r\n}\r\n\r\nfunction generateRandom() {\r\n\tkickArr = [];\r\n\tdrumSet.innerHTML = \"\";\r\n\tinstrumentsStyle.innerHTML = \"\";\r\n\r\n\tfor (let x = 0; x < gridRows.value; x++) {\r\n\t\tconst rowElem = document.createElement(\"div\");\r\n\t\trowElem.classList.add(instrumentsList[x] + \"-set\");\r\n\t\tconst spanElem = document.createElement(\"span\");\r\n\t\tspanElem.innerHTML = instrumentsList[x];\r\n\t\trowElem.appendChild(spanElem);\r\n\t\tconst section = document.createElement(\"section\");\r\n\t\tfor (let i = 0; i < gridColumns.value; i++) {\r\n\t\t\tconst element = document.createElement(\"div\");\r\n\t\t\tvar rnd = mathRandom();\r\n\t\t\tif (x == 0) {\r\n\t\t\t\tkickArr.push(rnd);\r\n\t\t\t\tif (rnd) {\r\n\t\t\t\t\telement.classList.add(instrumentsList[x] + \"-active\");\r\n\t\t\t\t}\r\n\t\t\t} else if (x == 1 && !kickArr[i] && rnd) {\r\n\t\t\t\telement.classList.add(instrumentsList[x] + \"-active\");\r\n\t\t\t} else if (x > 1 && rnd) {\r\n\t\t\t\telement.classList.add(instrumentsList[x] + \"-active\");\r\n\t\t\t}\r\n\t\t\tsection.appendChild(element);\r\n\t\t}\r\n\t\tconsole.log(kickArr);\r\n\t\trowElem.appendChild(section);\r\n\t\tdrumSet.appendChild(rowElem);\r\n\t\tinstrumentsStyle.innerHTML += `\r\n        .${instrumentsList[x]}-set > section > div{border: 2px solid hsl(${(x * 30 + 180) % 360}deg 50% 40% / 80%)}\r\n        .${instrumentsList[x]}-set section div.${instrumentsList[x]}-active{background-color: hsl(${x * 30}deg 50% 40% / 80%)}`;\r\n\t}\r\n}\r\n\r\nvar interval;\r\nclearInterval(interval);\r\nvar startPos = 0;\r\nif (\"vibrate\" in navigator) {\r\n\tnavigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;\r\n}\r\nfunction startSet() {\r\n\tbtnPlay.classList.add(\"playing\");\r\n\tplaybackMode = true;\r\n\tbtnPlay.value = \"PAUSE\";\r\n\tclearInterval(interval);\r\n\tstartPos = 0;\r\n\tinterval = setInterval(function () {\r\n\t\tfor (let iii = 0; iii < gridRows.value; iii++) {\r\n\t\t\tdocument.querySelector(\"#drumSet\")\r\n\t\t\t\t.childNodes[iii].childNodes.item(1)\r\n\t\t\t\t.childNodes.forEach(item => item.classList.remove(\"active\"));\r\n\t\t}\r\n\t\tfor (let iii = 0; iii < gridRows.value; iii++) {\r\n\t\t\tdocument.querySelector(\"#drumSet\").childNodes[iii].childNodes.item(1).childNodes[startPos].classList.add(\"active\");\r\n\t\t}\r\n\t\tif (startPos % gridColumns.value <= 0) {\r\n\t\t\tprimaryTone = audioCtx.createOscillator();\r\n\t\t\tprimaryGain = audioCtx.createGain();\r\n\t\t\tprimaryTone.connect(primaryGain);\r\n\t\t\tprimaryTone.type = \"triangle\";\r\n\t\t\tprimaryTone.frequency.value = 440;\r\n\t\t\tprimaryGain.connect(outputGain);\r\n\t\t\tprimaryTone.start(0);\r\n\t\t\tprimaryGain.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.3);\r\n\t\t\tnavigator.vibrate([50]);\r\n\t\t\t// primaryTone.stop();\r\n\t\t} else {\r\n\t\t\tprimaryTone = audioCtx.createOscillator();\r\n\t\t\tprimaryGain = audioCtx.createGain();\r\n\t\t\tprimaryTone.connect(primaryGain);\r\n\t\t\tprimaryTone.type = \"triangle\";\r\n\t\t\tprimaryTone.frequency.value = 300;\r\n\t\t\tprimaryGain.connect(outputGain);\r\n\t\t\tprimaryTone.start(0);\r\n\t\t\tprimaryGain.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + 0.15);\r\n\t\t\tnavigator.vibrate([30]);\r\n\t\t\t// primaryTone.stop();\r\n\t\t}\r\n\t\tstartPos++;\r\n\t\tstartPos %= gridColumns.value;\r\n\t}, (60 * 1000) / bpmInput.value);\r\n}\r\nbtnGenRandom.onclick = function () {\r\n\tgenerateRandom();\r\n};\r\nbtnPlay.onclick = function () {\r\n\tif (!playbackMode) {\r\n\t\tstartSet();\r\n\t} else {\r\n\t\tpushStop();\r\n\t}\r\n};\r\nbpmInput.addEventListener(\"change\", () => {\r\n\tbpmInput.value > 200 ? (bpmInput.value = 200) : bpmInput;\r\n\tbpmInput.value < 20 ? (bpmInput.value = 20) : bpmInput;\r\n\r\n\tif (playbackMode) {\r\n\t\tstartSet();\r\n\t}\r\n\tlocalStorage.setItem(\"bpmInput\", bpmInput.value);\r\n\tresize();\r\n});\r\ngridRows.addEventListener(\"change\", () => {\r\n\tpushStop();\r\n\tgridRows.value < 2 ? (gridRows.value = 2) : gridRows.value;\r\n\tgridRows.value > 9 ? (gridRows.value = 9) : gridRows.value;\r\n\tlocalStorage.setItem(\"gridRows\", gridRows.value);\r\n\r\n\tgenerateRandom();\r\n\tresize();\r\n});\r\ngridColumns.addEventListener(\"change\", () => {\r\n\tpushStop();\r\n\tgridColumns.value < 5 ? (gridColumns.value = 5) : gridColumns.value;\r\n\tgridColumns.value > 32 ? (gridColumns.value = 32) : gridColumns.value;\r\n\tlocalStorage.setItem(\"gridColumns\", gridColumns.value);\r\n\r\n\tgenerateRandom();\r\n\tresize();\r\n});\r\n\r\nfunction pushStop() {\r\n\tbtnPlay.classList.remove(\"playing\");\r\n\tclearInterval(interval);\r\n\tplaybackMode = false;\r\n\tbtnPlay.value = \"PLAY\";\r\n}\r\n\r\nfunction mathRandom() {\r\n\treturn Math.round(Math.random());\r\n}\r\n\r\ndocument.addEventListener(\"keyup\", keybHandler, false);\r\n\r\nfunction keybHandler(event) {\r\n\tvar keyPush = event.code.toUpperCase();\r\n\tconsole.log(keyPush);\r\n\tswitch (keyPush) {\r\n\t\tcase \"SPACE\":\r\n\t\t\tif (!playbackMode) {\r\n\t\t\t\tstartSet();\r\n\t\t\t} else {\r\n\t\t\t\tpushStop();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"ENTER\":\r\n\t\t\tgenerateRandom();\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\r\nwindow.addEventListener(\"resize\", resize);\r\nwindow.addEventListener(\"orientationchange\", resize());\r\n\r\nfunction resize() {\r\n\tvar crutchStyle = document.querySelector('[data=\"crutch\"]');\r\n\r\n\tcrutchStyle.innerHTML = `#drumSet > div > section > div{height: ${window.innerHeight / (gridRows.value + 1)}vh;\r\n                                                            width: ${80 / gridColumns.value}vw}\r\n    #drumSet > div{height: ${window.innerHeight / (gridRows.value + 1)}vh}\r\n    `;\r\n\r\n\tconsole.log(gridRows.value);\r\n\t// document.querySelector(\"#drumSet > div\").style.height = 100 / window.innerHeight / (gridRows.value + 1) + \"vh\";\r\n\t// document.querySelector(\"#drumSet >div> section> div\").style.height = 100 / window.innerHeight / (gridRows.value + 1) + \"vh\";\r\n\t// document.querySelector(\"#drumSet >div> section> div\").setAttribute(\"style\", window.innerHeight / (gridRows.value + 1) + \"vh\");\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
